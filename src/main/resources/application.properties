# ===================================================================
#  AI2MQTT - Configuration
# ===================================================================
spring.application.name=AI2MQTT
spring.config.import=optional:classpath:secrets.properties
# --- MESSAGING SWITCH ---
# set to 'mqtt' for Home Assistant
messaging.type=mqtt
# ===================================================================
#  Gemini (via OpenAI Compatibility Layer)
# ===================================================================
# Paste your key here or set env var GEMINI_API_KEY
openai.api.key=${GEMINI_API_KEY:}
# The specific Gemini model
openai.model=gemini-2.5-flash
# Google's OpenAI-compatible endpoint
openai.base-url=https://generativelanguage.googleapis.com/v1beta/openai/
# Safety & Cost Controls
openai.default.max-tokens=500
openai.default.temperature=0.7
# --- NEW: System Prompt Configuration ---
# This defines the "Default Persona" if the MQ message doesn't provide one.
openai.system-prompt=You are a helpful home automation assistant. Keep responses concise.
# ===================================================================
#  MQTT (Home Assistant Mosquitto)
# ===================================================================
# "homeassistant.local" is the standard internal hostname for Add-ons
# If this fails, use your HA IP address (e.g. tcp://192.168.1.x:1883)
mqtt.broker.url=tcp://homeassistant.local:1883
spring.activemq.broker-url=tcp://docker:61616
# The user you created in HA > Settings > People > Users
mqtt.username=${MQTT_USER:}
mqtt.password=${MQTT_PASSWORD:}
# Unique ID so HA knows who we are
mqtt.client.id=ai2mqtt-service
# Discovery for MQTT in HA
homeassistant.discovery.enabled=false
# Topics
mqtt.topic.prompts=ai/prompts
mqtt.topic.responses=ai/responses
# ===================================================================
#  Database (History)
# ===================================================================
spring.datasource.url=jdbc:h2:file:./data/ai2mq_db
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true
# ===================================================================
#  Server
# ===================================================================
server.port=8080
spring.thymeleaf.cache=false
