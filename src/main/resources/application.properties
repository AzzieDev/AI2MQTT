# ===================================================================
#  AI2MQ - Core Configuration
# ===================================================================
spring.application.name=AI2MQTT

# --- MESSAGING HOTSWAP SWITCH ---
# Options: 'activemq' or 'mqtt'
# This single property determines which adapter beans load at startup.
messaging.type=${MESSAGING_TYPE:mqtt}


# ===================================================================
#  OpenAI / Local LLM Configuration
# ===================================================================
# The API Key (Required for OpenAI, often ignored but required by vLLM)
openai.api.key=${OPENAI_API_KEY:dummy-key}

# The Model Name (e.g., 'gpt-4o', 'gpt-3.5-turbo', 'llama-3-8b', 'mistral')
openai.model=${OPENAI_MODEL:gpt-4o}

# The Base URL allows switching between real OpenAI and Local AI
# OpenAI Default: https://api.openai.com/v1
# vLLM/LocalAI Example: http://localhost:8000/v1
openai.base-url=${OPENAI_BASE_URL:https://api.openai.com/v1}

# Global Safety Limits (Can be overridden by the incoming message JSON)
openai.default.max-tokens=500
openai.default.temperature=0.7


# ===================================================================
#  Messaging: ActiveMQ (Used only if messaging.type=activemq)
# ===================================================================
# Default assumes Docker service name 'activemq' or localhost
spring.activemq.broker-url=${SPRING_ACTIVEMQ_BROKER_URL:tcp://localhost:61616}
spring.activemq.user=${SPRING_ACTIVEMQ_USER:admin}
spring.activemq.password=${SPRING_ACTIVEMQ_PASSWORD:admin}


# ===================================================================
#  Messaging: MQTT (Used only if messaging.type=mqtt)
# ===================================================================
# Default assumes Docker service name 'mosquitto' or localhost
mqtt.broker.url=${MQTT_BROKER_URL:tcp://localhost:1883}
mqtt.client.id=${MQTT_CLIENT_ID:ai2mq-client}
mqtt.username=${MQTT_USERNAME:}
mqtt.password=${MQTT_PASSWORD:}

# Topic Configuration
mqtt.topic.prompts=ai/prompts
mqtt.topic.responses=ai/responses


# ===================================================================
#  Database (H2 In-Memory)
# ===================================================================
# Persists data to a file so history survives restarts (optional)
# Change to 'mem:testdb' if you want it to wipe on restart.
spring.datasource.url=jdbc:h2:file:./data/ai2mq_db
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update

# H2 Console enabled at /h2-console for debugging
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true


# ===================================================================
#  Server & UI
# ===================================================================
server.port=8080
spring.thymeleaf.cache=false